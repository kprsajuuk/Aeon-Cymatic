(this["webpackJsonpshadow-sonic"]=this["webpackJsonpshadow-sonic"]||[]).push([[0],{154:function(e,t,a){e.exports=a(327)},159:function(e,t,a){},160:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},322:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(27),r=a.n(o),c=(a(159),a(160),a(83)),s=a(84),l=a(96),u=a(93),d=a(69),m=a.n(d),h=(a(326),a(151)),p=(a(76),a(39)),f=a(75),g=(a(199),a(152)),v=a(134),b=a.n(v),y=function(){return{defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,current:1,pageSize:10,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showTotal:function(e,t){return"\u5171".concat(e,"\u6761")},total:0}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t||"test",n=new Blob([e.data]),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},E=a(65),S=a.n(E),_=g.a.Search,k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={musicList:[],loading:!1,keyword:"",pagination:y(),audio:""},e.getDuration=function(e){var t=b.a.duration(e),a=t.hours()>1?t.hours()+"h":"",n=t.minutes()+":",i=t.seconds().toString();return n.length<3&&(n="0"+n),i.length<2&&(i="0"+i),a+n+i},e.onSearch=function(t){e.setState({keyword:t},(function(){e.fetchMusicList()}))},e.fetchMusicList=function(){var t=e.state,a=t.pagination,n=t.keyword,i=a.pageSize,o=(a.current-1)*i;e.setState({loading:!0}),m.a.get("http://localhost:3333/search",{params:{keyword:n,limit:i,offset:o}}).then((function(t){e.setState({musicList:t.data.result.songs,pagination:Object(f.a)(Object(f.a)({},e.state.pagination),{},{total:t.data.result.songCount}),loading:!1})}))},e.fetchPlay=function(t){e.setState({loading:!0}),m.a.get("http://localhost:3333/download",{params:{id:t},responseType:"blob"}).then((function(t){var a=new Blob([t.data]),n=URL.createObjectURL(a);e.setState({audio:n,loading:!1})}))},e.fetchDownload=function(t,a){e.setState({loading:!0}),m.a.get("http://localhost:3333/download",{params:{id:t},responseType:"blob"}).then((function(t){e.setState({loading:!1}),w(t,a+".mp3")}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=[{title:"\u6807\u9898",dataIndex:"name",key:"name"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",render:function(t){return i.a.createElement("div",null,e.getDuration(t))}},{title:"\u4f5c\u8005",dataIndex:"artist",key:"artist",render:function(e,t){return i.a.createElement("div",null,t.artists[0].name)}},{title:"\u4e13\u8f91",dataIndex:"album",key:"album",render:function(e,t){return i.a.createElement("div",null,"\u300a",t.album.name,"\u300b")}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"action",render:function(t,a){return i.a.createElement("div",null,i.a.createElement(p.a,{type:"link",onClick:function(){return e.fetchPlay(a.id)}},"\u64ad\u653e"),i.a.createElement(p.a,{type:"link",onClick:function(){return e.fetchDownload(a.id,a.name)}},"\u4e0b\u8f7d"))}}];return i.a.createElement("div",{className:S.a.musicList},i.a.createElement("div",{className:S.a.search},i.a.createElement(_,{className:S.a.input,onSearch:this.onSearch})),i.a.createElement("div",{className:S.a.table},i.a.createElement(h.a,{dataSource:this.state.musicList,loading:this.state.loading,pagination:this.state.pagination,onChange:function(t){e.setState({pagination:Object(f.a)(Object(f.a)({},e.state.pagination),{},{current:t.current,pageSize:t.pageSize})},(function(){e.fetchMusicList()}))},columns:t,rowKey:"id"})),i.a.createElement("div",{className:S.a.player},i.a.createElement("audio",{src:this.state.audio,type:"audio/mpeg",controls:"controls"})))}}]),a}(n.Component),L=a(97),O=a.n(L),j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:O.a.main},i.a.createElement("div",{className:O.a.topBar}),i.a.createElement("div",{className:O.a.content},i.a.createElement(k,null)))}}]),a}(n.Component),x=a(150),M=a(26);a(322);var C=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(x.a,null,i.a.createElement(M.c,null,i.a.createElement(M.a,{exact:!0,path:["/"],component:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,a){e.exports={musicList:"MusicList_musicList__SVNzu",search:"MusicList_search__Juv70",input:"MusicList_input__1JSx6",table:"MusicList_table__2k9Rl",player:"MusicList_player__32hZK"}},97:function(e,t,a){e.exports={main:"Main_main__2eEIG",topBar:"Main_topBar__1rJsz",content:"Main_content__Gtd0O"}}},[[154,1,2]]]);
//# sourceMappingURL=main.fd1e7095.chunk.js.map