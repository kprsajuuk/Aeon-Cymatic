(this["webpackJsonpshadow-sonic"]=this["webpackJsonpshadow-sonic"]||[]).push([[0],{204:function(e,t,a){e.exports=a(404)},213:function(e,t,a){},32:function(e,t,a){e.exports={music:"Music_music__1jVhh",header:"Music_header__4rzex",input:"Music_input__2yrdG",select:"Music_select__2D_Bt",item:"Music_item__1W2Hr",text:"Music_text__2wKo5",table:"Music_table__uDKNk",album:"Music_album__32saU",info:"Music_info__2Stfu",emphasize:"Music_emphasize__1Ds_r",playList:"Music_playList__3glR-",rowAct:"Music_rowAct__Qd3lg",arrow:"Music_arrow__3okJl"}},402:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(19),r=a.n(o),s=a(93),c=a(87),l=function(e,t){return{type:"SEARCH_MUSIC",searchKey:e,searchType:t}},u={searchKey:"",searchType:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_MUSIC":return Object.assign({},e,{searchKey:t.searchKey,searchType:t.searchType});default:return e}},m=Object(c.b)({searchMusic:d}),p=(a(213),a(44)),h=a(45),f=a(47),g=a(46),y=(a(151),a(80)),v=(a(220),a(201)),b=a(62),E=a.n(b),w=(a(106),a(58)),k=a(37),A=(a(135),a(74)),C=(a(161),a(95)),S=(a(162),a(104)),_=(a(105),a(59)),L=(a(249),a(202)),O=(a(254),a(131)),M=(a(163),a(96)),D=(a(259),a(64)),N=a(405),j=a(406),P=a(407),I=a(408),x=a(409),T=a(88),z=a.n(T),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t||"test",n=new Blob([e.data]),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"milliseconds",a=z.a.duration(e,t),n=a.hours()>1?a.hours()+"h":"",i=a.minutes()+":",o=a.seconds().toString();return i.length<3&&(i="0"+i),o.length<2&&(o="0"+o),n+i+o},R=a(52),H=a.n(R),V=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={audioSource:"",duration:"0:00",current:"0:00",paused:!0,volume:100,loop:!1,visual:!1,actMenuVisible:!1,extendVisible:!1},e.initAudio=function(){var t=new Blob([e.props.src.data]);e.audioCtx||(e.audioCtx=new(window.AudioContext||window.webkitAudioContext),e.audioSource=e.audioCtx.createMediaElementSource(document.querySelector("audio")),e.analyser=e.audioCtx.createAnalyser(),e.analyser.fftSize=256,e.audioSource.connect(e.analyser),e.analyser.connect(e.audioCtx.destination));var a=URL.createObjectURL(t);e.setState({audioSource:a},(function(){var t=setInterval((function(){isNaN(e.audio.duration)||(clearInterval(t),e.playMusic(),e.setState({duration:Math.floor(e.audio.duration)}))}),100);e.audio.removeEventListener("timeupdate",e.onTimeUpdate),e.audio.addEventListener("timeupdate",e.onTimeUpdate),e.progressBar.onmousedown=e.onDragProgress,e.audio.removeEventListener("ended",e.onEndEvent),e.audio.addEventListener("ended",e.onEndEvent)}))},e.drawVisualEffect=function(){var t=new Uint8Array(e.analyser.frequencyBinCount);e.analyser.getByteFrequencyData(t);var a=e.canvas.width,n=e.canvas.height;if(e.ctx.clearRect(0,0,a,n),e.state.visual){for(var i=a/2/t.length,o=0;o<t.length;o++){var r=t[o]/256*n*.3;e.ctx.fillRect(i*o,n-r,.7*i,r),e.ctx.fillRect(a-i*o,n-r,.7*i,r)}e.animationEnd?(e.animationEnded=!0,e.ctx.clearRect(0,0,a,n)):window.requestAnimationFrame(e.drawVisualEffect)}},e.playMusic=function(){clearTimeout(e.animationEndTimer),e.animationEnd=!1,e.audio.play(),e.setState({paused:!1}),e.animationEnded&&(e.animationEnded=!1,window.requestAnimationFrame(e.drawVisualEffect))},e.pauseMusic=function(){e.audio.pause(),e.animationEndTimer=setTimeout((function(){return e.animationEnd=!0}),2e3),e.setState({paused:!0})},e.onTimeUpdate=function(){var t=e.state.current,a=Math.floor(e.audio.currentTime);a!==t&&e.setState({current:a})},e.onPlay=function(){e.audio.paused?e.playMusic():e.pauseMusic()},e.onVolumeChange=function(t){e.setState({volume:t},(function(){e.audio.volume=e.state.volume/100}))},e.onDragProgress=function(t){t.preventDefault();var a=document.getElementById("progressBar").offsetWidth;e.audio.currentTime=e.audio.duration*t.offsetX/a,e.progressBar.onmousemove=function(t){e.audio.currentTime=e.audio.duration*t.offsetX/a},document.body.onmouseup=function(){e.progressBar.onmousemove=null,document.body.onmouseup=null}},e.onEndEvent=function(){e.audio.pause(),e.onAudioEnd(0)},e.onAudioEnd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.audio.currentTime=0,e.state.loop?e.playMusic():(e.pauseMusic(),e.setState({paused:!0}),e.props.onAudioEnd(t))},e.onDownload=function(){var t="qq"===e.props.audioData.source?".m4a":".mp3";B(e.props.src,e.props.audioData.name+t)},e.onVisualChange=function(t){e.setState({visual:t},(function(){t&&!e.state.paused&&window.requestAnimationFrame(e.drawVisualEffect)}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.audio=document.getElementById("audioTag"),this.progressBar=document.getElementById("progressBar"),this.animationEnded=!0,this.canvas=document.getElementById("audioCanvas");var e=document.getElementById("canvasContainer");this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="rgba(229, 206, 0, 0.3)"}},{key:"componentDidUpdate",value:function(e,t,a){this.props.src!==e.src&&this.initAudio()}},{key:"render",value:function(){var e=this,t=this.state,a=t.paused,n=t.duration,o=t.current,r=t.volume,s=t.audioSource,c=t.actMenuVisible,l=t.extendVisible,u=i.a.createElement("div",{className:H.a.extend},i.a.createElement("div",{className:[H.a.info,"ellipsis"].join(" ")},"\u5f53\u524d\u64ad\u653e: ",this.props.audioData.name?"".concat(this.props.audioData.name," - ").concat(this.props.audioData.artist):"\u65e0"),i.a.createElement("div",{className:H.a.action},i.a.createElement(N.a,{className:"link",onClick:function(){return e.onAudioEnd(-1)}}),i.a.createElement(j.a,{className:"link",onClick:function(){return e.onAudioEnd(1)}}))),d=i.a.createElement(D.a,{onClick:function(t){"downloadBtn"===t.key&&e.setState({actMenuVisible:!1})}},i.a.createElement(D.a.Item,{key:"downloadBtn",disabled:!s,onClick:this.onDownload},"\u4e0b\u8f7d"),i.a.createElement(D.a.Item,{key:"loopBtn"},i.a.createElement(O.a,null,"\u5faa\u73af",i.a.createElement(M.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",onChange:function(t){return e.setState({loop:t})}}))),i.a.createElement(D.a.Item,{key:"visualBtn"},i.a.createElement(O.a,null,"\u6548\u679c",i.a.createElement(M.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",onChange:this.onVisualChange})))),m=i.a.createElement("div",{className:H.a.volumePop},i.a.createElement(L.a,{className:H.a.slider,vertical:!0,value:r,onChange:this.onVolumeChange}));return i.a.createElement("div",{className:H.a.audioControl},i.a.createElement(S.a,{content:u,placement:"bottomLeft",onVisibleChange:function(t){return e.setState({extendVisible:t})}},i.a.createElement(O.a,{className:H.a.interface,style:{boxShadow:l?"0 0 5px #e5ce00":"none"}},i.a.createElement("audio",{id:"audioTag",src:s}),i.a.createElement("div",{className:H.a.item},i.a.createElement(_.a,{shape:"circle",onClick:this.onPlay,size:"small",disabled:!s,icon:a?i.a.createElement(P.a,null):i.a.createElement(I.a,null)})),i.a.createElement("div",{className:H.a.item},U(o,"seconds"),"/",U(n,"seconds")),i.a.createElement("div",{className:H.a.progressBar},i.a.createElement("div",{id:"progressBar",className:H.a.current},i.a.createElement("div",{id:"currentProgressBar",className:H.a.progress,style:{width:Math.round(100*o/n,0)+"%"||!1}}))),i.a.createElement("div",{className:H.a.item},i.a.createElement(S.a,{placement:"bottom",content:m},i.a.createElement(x.a,{style:{cursor:"pointer"}}))),i.a.createElement("div",{className:H.a.item},i.a.createElement(C.a,{overlay:d,visible:c,onVisibleChange:function(t){return e.setState({actMenuVisible:t})}},i.a.createElement(_.a,{size:"small"},"\u66f4\u591a"))))),i.a.createElement("div",{className:H.a.canvasContainer},i.a.createElement("div",{id:"canvasContainer",style:{height:"100%",width:"100%"}},i.a.createElement("canvas",{id:"audioCanvas"}))))}}]),a}(n.Component),q=(a(112),a(72)),K=function(){return{defaultCurrent:1,defaultPageSize:10,hideOnSinglePage:!1,current:1,pageSize:10,pageSizeOptions:["10","20","50","100"],showSizeChanger:!0,showTotal:function(e,t){return"\u5171".concat(e,"\u6761")},total:0}},J=(a(98),a(54)),W=a(410),Y=a(411),F=a(412),G=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={btnList:e.props.btnList||["play","add","download"]},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.btnList!==e.btnList&&this.setState({btnList:this.props.btnList||["play","add","download"]})}},{key:"render",value:function(){var e=this.state.btnList;return i.a.createElement("div",null,e.indexOf("play")>=0&&i.a.createElement(J.a,{title:"\u64ad\u653e"},i.a.createElement(W.a,{className:"link",onClick:this.props.onPlay})),e.indexOf("add")>=0&&i.a.createElement(J.a,{title:"\u52a0\u5165\u6b4c\u5355"},i.a.createElement(Y.a,{className:"link",onClick:this.props.onAddList})),e.indexOf("download")>=0&&i.a.createElement(J.a,{title:"\u4e0b\u8f7d"},i.a.createElement(F.a,{className:"link",onClick:this.props.onDownload})))}}]),a}(n.Component),Q=a(32),X=a.n(Q),$=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,musicList:[],keyword:"",type:"net",audio:"",pagination:K(),audioData:{}},e.onSearch=function(t,a){e.setState({keyword:t,type:a,pagination:Object(k.a)(Object(k.a)({},e.state.pagination),{},{current:1})},(function(){e.fetchMusicList()})),e.props.onUpdate()},e.onAlbumClick=function(t){e.props.onAlbum(t)},e.onArtistClick=function(t){e.props.onArtist(t)},e.onPlay=function(t){e.props.onPlay(t.id,t)},e.onAddList=function(t){e.props.onAddList(t)},e.onDownload=function(t){e.props.onDownload(t.id,t)},e.fetchMusicList=function(){var t=e.state,a=t.pagination,n=t.keyword,i=t.type,o=a.pageSize,r=a.current;e.setState({loading:!0}),E.a.get("/search",{params:{source:i,keyword:n,limit:o,page:r}}).then((function(t){e.setState({loading:!1}),t.data.success?e.setState({musicList:t.data.songs,pagination:Object(k.a)(Object(k.a)({},a),{},{total:t.data.total})}):w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u5931\u8d25",duration:null})}))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.searchMusic!==e.searchMusic&&this.props.searchMusic&&this.onSearch(this.props.searchMusic.searchKey,this.props.searchMusic.searchType)}},{key:"render",value:function(){var e=this,t=this.props.loading||this.state.loading,a=[{title:"\u6b4c\u66f2\u540d",dataIndex:"name",key:"name"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",width:75,render:function(e){return i.a.createElement("div",null,U(e))}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onArtistClick(a)}},a.artist)}},{title:"\u4e13\u8f91",dataIndex:"album",key:"album",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onAlbumClick(a)}},"\u300a",a.album,"\u300b")}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"action",width:150,render:function(t,a){return i.a.createElement(G,{onPlay:function(){e.onPlay(a)},onAddList:function(){e.onAddList(a)},onDownload:function(){return e.onDownload(a)}})}}];return i.a.createElement("div",{className:X.a.table},i.a.createElement(q.a,{dataSource:this.state.musicList,loading:t,pagination:this.state.pagination,onChange:function(t){e.setState({pagination:Object(k.a)(Object(k.a)({},e.state.pagination),{},{current:t.current,pageSize:t.pageSize})},(function(){e.fetchMusicList()}))},scroll:{y:window.innerHeight-268},size:"small",columns:a,rowKey:"id"}))}}]),a}(n.Component),Z=Object(s.b)((function(e){return e}))($),ee=a(413),te=(a(170),a(124)),ae=(a(134),a(67)),ne=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!0,imageErr:!1},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.src!==e.src&&this.setState({loading:!0,imageErr:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.imageErr;return i.a.createElement("div",{style:{minHeight:this.props.minHeight||0,minWidth:this.props.minWIdth||0}},i.a.createElement(te.a,{style:{width:"100%",minHeight:this.props.minHeight||0},spinning:a},!1===n&&i.a.createElement("img",{src:this.props.src,alt:this.props.alt||"logo",style:{opacity:a?"0":"1",width:"100%"},onLoad:function(){e.setState({loading:!1})},onError:function(){return e.setState({imageErr:!0,loading:!1})},onDragStart:function(e){return e.preventDefault()}}),!0===n&&i.a.createElement(ae.a,null)))}}]),a}(n.Component),ie=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,pagination:K(),musicList:[],albumInfo:{}},e.onPlay=function(t){e.props.onPlay(t.id,t)},e.onAddList=function(t){e.props.onAddList(t)},e.onAddAlbum=function(){e.props.onAddAlbum(e.state.musicList)},e.onDownload=function(t){e.props.onDownload(t.id,t)},e.onArtistClick=function(t){e.props.onArtist(t)},e.fetchAlbumDetail=function(){e.setState({loading:!0,albumInfo:{}}),E.a.get("/albumMusic",{params:{id:e.props.album.albumId,source:e.props.album.source}}).then((function(t){e.setState({loading:!1}),t.data.success?e.setState({musicList:t.data.songs,albumInfo:t.data.album}):w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u5931\u8d25",duration:null})}))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.album.albumId!==e.album.albumId&&this.fetchAlbumDetail()}},{key:"render",value:function(){var e=this,t=this.props.loading||this.state.loading,a=this.state.albumInfo,n=[{title:"\u6b4c\u66f2\u540d",dataIndex:"name",key:"name"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",width:75,render:function(e){return i.a.createElement("div",null,U(e))}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onArtistClick(a)}},a.artist)}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"action",width:150,render:function(t,a){return i.a.createElement(G,{onPlay:function(){e.onPlay(a)},onAddList:function(){e.onAddList(a)},onDownload:function(){return e.onDownload(a)}})}}];return i.a.createElement("div",{className:X.a.album},this.props.album.albumId&&i.a.createElement("div",{className:X.a.info},i.a.createElement(ne,{minHeight:100,src:a.img}),i.a.createElement("div",{className:X.a.emphasize},"\u300a",a.name,"\u300b"),i.a.createElement("div",null,"\u6b4c\u624b: ",a.artist),i.a.createElement("div",null,"\u516c\u53f8: ",a.company),i.a.createElement("div",null,"\u53d1\u884c\u65f6\u95f4: ",z()(a.publishTime).format("YYYY-MM-DD")),i.a.createElement(S.a,{content:i.a.createElement(J.a,{title:"\u6dfb\u52a0\u4e13\u8f91\u4e2d\u7684\u6b4c\u66f2\u5230\u6b4c\u5355"},i.a.createElement(Y.a,{className:"link",onClick:this.onAddAlbum}))},i.a.createElement(ee.a,{className:"link"}))),i.a.createElement("div",{className:X.a.table},i.a.createElement(q.a,{dataSource:this.state.musicList,loading:t,pagination:this.state.pagination,onChange:function(t){e.setState({pagination:Object(k.a)(Object(k.a)({},e.state.pagination),{},{current:t.current,pageSize:t.pageSize})})},scroll:{y:window.innerHeight-268},size:"small",columns:n,rowKey:"id"})))}}]),a}(n.Component),oe=A.a.TabPane,re=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,pagination:K(),hotList:[],albumList:[],artistInfo:{}},e.onPlay=function(t){e.props.onPlay(t.id,t)},e.onAddList=function(t){e.props.onAddList(t)},e.onDownload=function(t){e.props.onDownload(t.id,t)},e.onAlbumClick=function(t){e.props.onAlbum(t)},e.fetchArtistDetail=function(){e.setState({loading:!0,artistInfo:{}}),E.a.get("/artistMusic",{params:{id:e.props.artist.artistId,source:e.props.artist.source}}).then((function(t){e.setState({loading:!1}),t.data.success?e.setState({hotList:t.data.songs,artistInfo:t.data.artist}):w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u6b4c\u624b\u4fe1\u606f\u5931\u8d25",duration:null})}))},e.fetchArtistAlbum=function(){var t=e.state.pagination,a=t.pageSize,n=t.current;e.setState({loading:!0}),E.a.get("/artistAlbum",{params:{id:e.props.artist.artistId,limit:a,page:n,source:e.props.artist.source}}).then((function(a){e.setState({loading:!1}),a.data.success?e.setState({albumList:a.data.albums,pagination:Object(k.a)(Object(k.a)({},t),{},{total:a.data.albumSize})}):w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u6b4c\u624b\u4e13\u8f91\u5931\u8d25",duration:null})}))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.artist.artistId!==e.artist.artistId&&(this.fetchArtistDetail(),this.fetchArtistAlbum())}},{key:"render",value:function(){var e=this,t=this.props.loading||this.state.loading,a=this.state.artistInfo,n=[{title:"\u6b4c\u66f2\u540d",dataIndex:"name",key:"name"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",width:75,render:function(e){return i.a.createElement("div",null,U(e))}},{title:"\u4e13\u8f91",dataIndex:"album",key:"album",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onAlbumClick(a)}},"\u300a",a.album,"\u300b")}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"action",width:150,render:function(t,a){return i.a.createElement(G,{onPlay:function(){e.onPlay(a)},onAddList:function(){e.onAddList(a)},onDownload:function(){return e.onDownload(a)}})}}],o=[{title:"\u4e13\u8f91\u540d",dataIndex:"album",key:"album",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onAlbumClick(a)}},"\u300a",t,"\u300b")}},{title:"\u53d1\u884c\u65e5\u671f",dataIndex:"publishTime",key:"publishTime",render:function(e){return z()(e).format("YYYY-MM-DD")}},{title:"\u516c\u53f8",dataIndex:"company",key:"company"},{title:"\u6b4c\u66f2\u6570\u91cf",dataIndex:"size",key:"size"}];return i.a.createElement("div",{className:X.a.album},this.props.artist.artistId&&i.a.createElement("div",{className:X.a.info},i.a.createElement(ne,{minHeight:100,src:a.img}),i.a.createElement("div",{className:X.a.emphasize},a.name)),i.a.createElement(A.a,{type:"card",tabPosition:"left",size:"small"},i.a.createElement(oe,{tab:"Top50",key:"music"},i.a.createElement(q.a,{dataSource:this.state.hotList,loading:t,pagination:!1,scroll:{y:window.innerHeight-268},size:"small",columns:n,rowKey:"id"})),i.a.createElement(oe,{tab:"\u4e13\u8f91",key:"album"},i.a.createElement(q.a,{dataSource:this.state.albumList,loading:t,pagination:this.state.pagination,onChange:function(t){e.setState({pagination:Object(k.a)(Object(k.a)({},e.state.pagination),{},{current:t.current,pageSize:t.pageSize})},(function(){e.fetchArtistAlbum()}))},size:"small",scroll:{y:window.innerHeight-268},columns:o,rowKey:"albumId"}))))}}]),a}(n.Component),se=a(414),ce=a(415),le=a(416),ue=a(417),de=A.a.TabPane,me=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={loading:!1,editMod:!1,listType:"customList",customPagination:K(),recentPagination:K()},e.onRemove=function(t){var a=e.state.listType;e.props.onUpdate(a,"remove",t)},e.onPlay=function(t){e.props.onPlay(t.id,t,e.state.listType)},e.onAddList=function(t){e.props.onAddList(t)},e.onDownload=function(t){e.props.onDownload(t.id,t)},e.onArtistClick=function(t){e.props.onArtist(t)},e.onModChange=function(t){e.props.onModChange(t)},e.onPositionChange=function(t,a){var n=e.state.listType;e.props.onUpdate(n,"move",t,a)},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,a){}},{key:"render",value:function(){var e=this,t=this.props,a=t.customList,n=t.recentList,o=t.currentType,r=t.audioData,s=this.state,c=s.editMod,l=s.listType,u=this.props.loading||this.state.loading,d=[{title:"",dataIndex:"name",key:"remove",width:64,render:function(t,a){return i.a.createElement("div",null,c&&i.a.createElement("div",{className:X.a.rowAct},i.a.createElement(pe,{onArrow:function(t){return e.onPositionChange([a],t)}}),i.a.createElement(se.a,{className:"link",onClick:function(){return e.onRemove([a])}})))}},{title:"",dataIndex:"name",key:"playing",width:30,render:function(e,t){return i.a.createElement("div",null,l===o&&t.id===r.id&&i.a.createElement(ce.a,{spin:!0,className:X.a.tableColIcon}))}},{title:"\u6b4c\u66f2\u540d",dataIndex:"name",key:"name"},{title:"\u65f6\u957f",dataIndex:"duration",key:"duration",width:75,render:function(e){return i.a.createElement("div",null,U(e))}},{title:"\u6b4c\u624b",dataIndex:"artist",key:"artist",render:function(t,a){return i.a.createElement("span",{className:"link",onClick:function(){return e.onArtistClick(a)}},a.artist)}},{title:"\u64cd\u4f5c",dataIndex:"id",key:"action",width:150,render:function(t,a){return i.a.createElement(G,{btnList:"customList"===l?["play","download"]:["play","add","download"],onPlay:function(){e.onPlay(a)},onAddList:function(){e.onAddList(a)},onDownload:function(){return e.onDownload(a)}})}}];return i.a.createElement("div",{className:X.a.playList},i.a.createElement("div",{className:X.a.header},i.a.createElement("div",{className:X.a.item},i.a.createElement("div",{className:X.a.text},"\u7f16\u8f91"),i.a.createElement(M.a,{size:"middle",onChange:function(t){return e.setState({editMod:t})}})),i.a.createElement("div",{className:X.a.item},i.a.createElement("div",{className:X.a.text},"\u5217\u8868\u64ad\u653e"),i.a.createElement(M.a,{size:"middle",onChange:function(t){return e.onModChange(t?"list":"solo")}}))),i.a.createElement(A.a,{type:"card",tabPosition:"left",size:"small",activeKey:this.state.listType,onChange:function(t){return e.setState({listType:t})}},i.a.createElement(de,{tab:"\u6b4c\u5355",key:"customList"},i.a.createElement("div",{className:X.a.table},i.a.createElement(q.a,{dataSource:a,loading:u,rowClassName:function(e){return l===o&&e.id===r.id?"highlightRow":""},pagination:this.state.customPagination,onChange:function(t){e.setState({customPagination:Object(k.a)(Object(k.a)({},e.state.customPagination),{},{current:t.current,pageSize:t.pageSize})})},scroll:{y:window.innerHeight-268},size:"small",columns:d,rowKey:"id"}))),i.a.createElement(de,{tab:"\u6700\u8fd1\u64ad\u653e",key:"recentList"},i.a.createElement("div",{className:X.a.table},i.a.createElement(q.a,{dataSource:n,loading:u,rowClassName:function(e){return l===o&&e.id===r.id?"highlightRow":""},pagination:this.state.recentPagination,onChange:function(t){e.setState({recentPagination:Object(k.a)(Object(k.a)({},e.state.recentPagination),{},{current:t.current,pageSize:t.pageSize})})},scroll:{y:window.innerHeight-268},size:"small",columns:d,rowKey:"id"})))))}}]),a}(n.Component),pe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(le.a,{onClick:function(){return e.props.onArrow(-1)},className:"link"}),i.a.createElement(ue.a,{onClick:function(){return e.props.onArrow(1)},className:[X.a.arrow,"link"].join(" ")}))}}]),a}(n.Component),he=A.a.TabPane,fe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={tab:"music",loading:!1,audioSrc:"",audioData:{},album:{},artist:{},recentList:[],customList:[],currentPlayList:"recentList",playMod:"soloSingle",playingList:[]},e.updatePlayList=function(t,a,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=JSON.parse(window.localStorage.getItem(t))||[],s={};if(n.forEach((function(e){var t=-1;switch(r.forEach((function(a,n){a.id===e.id&&(t=n)})),a){case"remove":t>=0&&r.splice(t,1);break;case"add":-1===t&&r.push(e);break;case"toTop":t>=0&&r.splice(t,1),r.splice(0,0,e);break;case"move":t>=0&&(r.splice(t,1),r.splice(t+i,0,e))}})),o>=0&&r.length>0)for(;r.length>o;)r.pop();window.localStorage.setItem(t,JSON.stringify(r)),s[t]=r,e.setState(Object(k.a)({},s))},e.onAlbum=function(t){e.setState({tab:"album",album:t})},e.onArtist=function(t){e.setState({tab:"artist",artist:t})},e.onPlay=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"recentList";e.updatePlayList("recentList","toTop",[a],0,50),e.setState({currentPlayList:n}),e.fetchPlay(t,a)},e.onAddList=function(t){var a=e.state.customList,n=-1;a.forEach((function(e,a){e.id===t.id&&(n=a)})),n>=0?w.a.warning({message:"\u6b4c\u66f2\u5df2\u5728\u6b4c\u5355\u4e2d",duration:4}):(e.updatePlayList("customList","add",[t]),w.a.success({message:"\u6dfb\u52a0\u6210\u529f",duration:4}))},e.onAddAlbum=function(t){e.updatePlayList("customList","add",t),w.a.success({message:"\u6dfb\u52a0\u6210\u529f",duration:4})},e.onAudioEnd=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("list"===e.state.playMod||0!==t){var a=JSON.parse(window.localStorage.getItem(e.state.currentPlayList))||[],n=-1;if(a.forEach((function(t,a){t.id===e.state.audioData.id&&(n=a)})),n>=0){(n+=t>=0?1:-1)>=a.length&&(n=0),n<0&&(n=Math.max(a.length-1,0));var i=a[n];i&&e.fetchPlay(i.id,i)}}},e.fetchPlay=function(t,a){e.setState({loading:!0,audioData:a,audioSrc:""}),E.a.get("/download",{params:{id:t,source:a.source},responseType:"blob"}).then((function(t){e.setState({loading:!1}),t.data.size>17?e.setState({audioSrc:t}):w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u5931\u8d25",duration:null})}))},e.fetchDownload=function(t,a){e.setState({loading:!0}),E.a.get("/download",{params:{id:t,source:a.source},responseType:"blob"}).then((function(t){if(e.setState({loading:!1}),t.data.size>17){var n="qq"===a.source?".m4a":".mp3";B(t,a.name+n)}else w.a.error({message:"\u7f51\u7edc\u9519\u8bef \u83b7\u53d6\u5931\u8d25",duration:null})}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.setState({recentList:JSON.parse(window.localStorage.getItem("recentList"))||[],customList:JSON.parse(window.localStorage.getItem("customList"))||[]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.playMod,o=t.recentList,r=t.customList,s=t.audioData,c=t.currentPlayList,l=i.a.createElement(V,{src:this.state.audioSrc,audioData:s,playMod:n,onAudioEnd:this.onAudioEnd});return i.a.createElement("div",{className:X.a.music},i.a.createElement(A.a,{activeKey:this.state.tab,tabBarExtraContent:l,onChange:function(t){return e.setState({tab:t})}},i.a.createElement(he,{tab:"\u6b4c\u66f2",key:"music",forceRender:!0},i.a.createElement(Z,{loading:a,onUpdate:function(){return e.setState({tab:"music"})},onPlay:this.onPlay,onAddList:this.onAddList,onDownload:this.fetchDownload,onAlbum:this.onAlbum,onArtist:this.onArtist})),i.a.createElement(he,{tab:"\u4e13\u8f91",key:"album",forceRender:!0},i.a.createElement(ie,{loading:a,album:this.state.album,onPlay:this.onPlay,onAddList:this.onAddList,onDownload:this.fetchDownload,onArtist:this.onArtist,onAddAlbum:this.onAddAlbum})),i.a.createElement(he,{tab:"\u6b4c\u624b",key:"artist",forceRender:!0},i.a.createElement(re,{loading:a,artist:this.state.artist,onPlay:this.onPlay,onAddList:this.onAddList,onDownload:this.fetchDownload,onAlbum:this.onAlbum})),i.a.createElement(he,{tab:"\u64ad\u653e\u5217\u8868",key:"play",forceRender:!0},i.a.createElement(me,{loading:a,recentList:o,customList:r,currentType:c,audioData:s,onPlay:this.onPlay,onAddList:this.onAddList,onDownload:this.fetchDownload,onArtist:this.onArtist,onUpdate:this.updatePlayList,onModChange:function(t){return e.setState({playMod:t})}}))))}}]),a}(n.Component),ge=a(76),ye=a.n(ge),ve=v.a.Search,be=y.a.Option,Ee=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={keyword:"",searchType:"net"},e.onTest=function(){E.a.get("/test").then((function(e){console.log(e)}))},e.onSearch=function(){var t=e.state,a=t.keyword,n=t.searchType;e.props.dispatch(l(a,n))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:ye.a.main},i.a.createElement("div",{className:ye.a.topBar},i.a.createElement("div",{className:ye.a.content},i.a.createElement("div",{className:ye.a.left},i.a.createElement("div",{className:ye.a.title},"AEON"),i.a.createElement(y.a,{defaultValue:"net",onChange:function(t){return e.setState({searchType:t})},className:ye.a.select},i.a.createElement(be,{value:"net"},"\u7f51\u6613\u4e91"),i.a.createElement(be,{value:"qq"},"qq\u97f3\u4e50")),i.a.createElement(ve,{onSearch:this.onSearch,value:this.state.keyword,onChange:function(t){return e.setState({keyword:t.target.value})}})))),i.a.createElement("div",{className:ye.a.container},i.a.createElement("div",{className:ye.a.content},i.a.createElement(fe,null))))}}]),a}(n.Component),we=Object(s.b)((function(e){return e}))(Ee),ke=a(200),Ae=a(38);a(402);var Ce=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(ke.a,null,i.a.createElement(Ae.c,null,i.a.createElement(Ae.a,{exact:!0,path:["/"],component:we}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Se=Object(c.c)(m);r.a.render(i.a.createElement(s.a,{store:Se},i.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,a){e.exports={audioControl:"AudioControl_audioControl__1ARvq",interface:"AudioControl_interface__1WUqc",progressBar:"AudioControl_progressBar__Qb42T",current:"AudioControl_current__1cu3t",progress:"AudioControl_progress__2kl9g",item:"AudioControl_item__TWECM",extend:"AudioControl_extend__3BScH",info:"AudioControl_info__2HSPC",action:"AudioControl_action__1yQ3M",volumePop:"AudioControl_volumePop__aED7h",slider:"AudioControl_slider__3E3tP",canvasContainer:"AudioControl_canvasContainer__3La-E"}},76:function(e,t,a){e.exports={main:"Main_main__2eEIG",topBar:"Main_topBar__1rJsz",content:"Main_content__Gtd0O",left:"Main_left__2BvH3",select:"Main_select__Js6Cp",title:"Main_title__3R2dg",container:"Main_container__3YkPS"}}},[[204,1,2]]]);
//# sourceMappingURL=main.8eeb978c.chunk.js.map